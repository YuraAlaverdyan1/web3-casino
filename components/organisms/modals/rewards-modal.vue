<template>
  <ModalsBaseModal :active="active" :buy-tickets="true">
    <div>
      <div class="absolute top-4 flex w-full px-4 justify-between">
        <div class="text-xl text-white">
          Rewards
        </div>
        <div>
          <input type="image" src="/images/lottery/buy-tickets-modal/close.png" @click="close">
        </div>
      </div>
      <div class="mt-16 px-4 flex flex-col items-center">
        <img src="/images/lottery/special-lotteries/verify-logo.png">
        <LotteryArrows class="self-end mr-28" @next="next" @prev="prev" />
        <div class="lotteries flex gap-7 max-w-[890px]">
          <o-carousel
            v-model="activeItem"
            :arrow="false"
            :indicator="false"
            :items-to-show="itemsToShow"
            :repeat="false"
            :has-drag="true"
            class="mt-6"
          >
            <o-carousel-item v-for="(item, index) of rewards" :key="index" class="raw-card-wrapper">
              <div class="flex flex-col gap-5 relative raw-card">
                <div class="w-full flex justify-between pb-2 gap-4 default-text">
                  <span>Round No.</span>
                  <div class="bg-[#38333F] flex gap-1 rounded-lg py-px px-2">
                    #{{ item.round }}
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                      <path
                        d="M21.7541 13.3523C21.4925 13.151 21.3421 12.8476 21.3421 12.5197C21.3421 12.1921 21.4925 11.8892 21.7541 11.6879C22.5747 11.057 22.8747 10.0253 22.5193 9.0595C22.1635 8.09459 21.2453 7.4934 20.2241 7.53348C19.8919 7.53952 19.5802 7.40807 19.3669 7.15726C19.1542 6.90601 19.0722 6.57848 19.1415 6.25828C19.3595 5.25372 18.9192 4.27286 18.0183 3.75873C17.1193 3.24632 16.0401 3.35751 15.268 4.04747C15.0216 4.26769 14.6933 4.36035 14.3671 4.30389C14.0406 4.247 13.765 4.04833 13.6094 3.7583C13.1232 2.84984 12.1483 2.3801 11.1245 2.55679C10.1012 2.73521 9.34686 3.50834 9.20384 4.52626C9.1585 4.85121 8.96796 5.1309 8.6815 5.29466C8.39504 5.45972 8.0532 5.48213 7.74581 5.35844C6.78308 4.97058 5.72967 5.23045 5.06038 6.01694C4.39284 6.80387 4.31741 7.8748 4.87072 8.74534C5.04687 9.02287 5.08306 9.35859 4.96926 9.66672C4.85589 9.97442 4.60998 10.2089 4.29518 10.3093C3.30586 10.6247 2.66579 11.4927 2.66666 12.5205C2.66666 13.5479 3.30586 14.4154 4.29518 14.7305C4.60998 14.8305 4.85589 15.0653 4.96926 15.373C5.08306 15.6807 5.04687 16.0169 4.87072 16.2944C4.31741 17.1649 4.39284 18.2354 5.06038 19.0228C5.72967 19.8097 6.78396 20.0683 7.74581 19.6813C8.0532 19.5581 8.39504 19.5813 8.6815 19.7451C8.96796 19.9088 9.1585 20.1885 9.20384 20.5135C9.34686 21.5314 10.1012 22.3045 11.1245 22.483C11.2684 22.5075 11.4114 22.52 11.5518 22.52C12.4121 22.52 13.1916 22.0619 13.6094 21.2814C13.765 20.9918 14.0406 20.7927 14.3671 20.7359C14.6933 20.6803 15.0216 20.7721 15.268 20.9923C16.0401 21.6818 17.1193 21.7934 18.0183 21.281C18.9192 20.7669 19.3595 19.786 19.1415 18.7815C19.0722 18.4613 19.1542 18.1337 19.3669 17.8825C19.5802 17.6317 19.874 17.492 20.2241 17.5067C21.2453 17.5373 22.1635 16.9452 22.5193 15.9802C22.8747 15.0145 22.5747 13.9832 21.7541 13.3523ZM16.9959 9.95072L11.6338 15.9307C11.5064 16.072 11.3303 16.1444 11.1533 16.1444C11.002 16.1444 10.8507 16.0919 10.7286 15.9858L8.39067 13.947C8.12514 13.7156 8.09942 13.3143 8.33399 13.0519C8.56901 12.7886 8.97494 12.7649 9.2396 12.9959L11.097 14.6154L16.0349 9.10906C16.2699 8.84704 16.6758 8.82291 16.9405 9.05476C17.2065 9.28748 17.2309 9.68827 16.9959 9.95072Z"
                        fill="#9E68FF"
                      />
                      <path
                        d="M16.9959 9.95072L11.6338 15.9307C11.5064 16.072 11.3303 16.1444 11.1533 16.1444C11.002 16.1444 10.8507 16.0919 10.7286 15.9858L8.39067 13.947C8.12514 13.7156 8.09942 13.3143 8.33399 13.0519C8.56901 12.7886 8.97494 12.7649 9.2396 12.9959L11.097 14.6154L16.0349 9.10906C16.2699 8.84704 16.6758 8.82291 16.9405 9.05476C17.2065 9.28748 17.2309 9.68827 16.9959 9.95072Z"
                        fill="#9E68FF"
                      />
                      <path
                        d="M15.2314 9.75425L13.0061 11.9884L10.7809 9.75425L13.0061 7.52002L15.2314 9.75425Z"
                        fill="white"
                      />
                      <path
                        d="M18.2697 12.9847L16.0445 15.2189L13.8193 12.9847L16.0445 10.7505L18.2697 12.9847Z"
                        fill="white"
                      />
                      <path
                        d="M12.1929 12.9847L9.96776 15.2189L7.74249 12.9847L9.96776 10.7505L12.1929 12.9847Z"
                        fill="white"
                      />
                      <path d="M15.874 16.8412H10.1382L13.0061 13.9618L15.874 16.8412Z" fill="white" />
                    </svg>
                  </div>
                </div>
                <div class="flex justify-between">
                  <div class="default-text">
                    Draw Date
                  </div>
                  <div class="text-white">
                    {{ item.date }}
                  </div>
                </div>
                <div class="flex justify-between items-center">
                  <div class="default-text">
                    Jackpot Size
                  </div>
                  <StakingBtn :color="item.color" :fill="false" class="flex items-center px-4 text-sm">
                    {{ item.type }} <img class="pl-2" :src="`/images/${item.token}.png`">
                  </StakingBtn>
                </div>
                <div class="flex justify-between items-center">
                  <div class="default-text">
                    Owner
                  </div>
                  <div class="text-white flex gap-1">
                    0xe2....2f
                    <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M20.7284 19.2175C21.8055 17.9216 22.5546 16.3853 22.9124 14.7386C23.2702 13.092 23.2261 11.3833 22.7839 9.75732C22.3417 8.13128 21.5144 6.63567 20.3719 5.39701C19.2294 4.15835 17.8054 3.21307 16.2204 2.64114C14.6353 2.06921 12.9358 1.88746 11.2656 2.11126C9.59547 2.33506 8.00377 2.95783 6.6252 3.92688C5.24662 4.89593 4.12172 6.18276 3.34565 7.67851C2.56958 9.17425 2.16518 10.8349 2.16666 12.52C2.16723 14.9696 3.03047 17.3408 4.60491 19.2175L4.58991 19.2303C4.64241 19.2933 4.70241 19.3473 4.75641 19.4095C4.82391 19.4868 4.89666 19.5595 4.96641 19.6345C5.17641 19.8625 5.39241 20.0815 5.61891 20.287C5.68791 20.35 5.75916 20.4085 5.82891 20.4685C6.06891 20.6755 6.31566 20.872 6.57141 21.055C6.60441 21.0775 6.63441 21.1068 6.66741 21.13V21.121C8.42399 22.3571 10.5195 23.0205 12.6674 23.0205C14.8153 23.0205 16.9108 22.3571 18.6674 21.121V21.13C18.7004 21.1068 18.7297 21.0775 18.7634 21.055C19.0184 20.8713 19.2659 20.6755 19.5059 20.4685C19.5757 20.4085 19.6469 20.3493 19.7159 20.287C19.9424 20.0808 20.1584 19.8625 20.3684 19.6345C20.4382 19.5595 20.5102 19.4868 20.5784 19.4095C20.6317 19.3473 20.6924 19.2933 20.7449 19.2295L20.7284 19.2175ZM12.6667 6.52C13.3342 6.52 13.9867 6.71794 14.5417 7.08879C15.0967 7.45964 15.5293 7.98675 15.7848 8.60345C16.0402 9.22015 16.107 9.89875 15.9768 10.5534C15.8466 11.2081 15.5251 11.8095 15.0531 12.2815C14.5811 12.7535 13.9798 13.0749 13.3251 13.2052C12.6704 13.3354 11.9918 13.2685 11.3751 13.0131C10.7584 12.7577 10.2313 12.3251 9.86045 11.7701C9.4896 11.215 9.29166 10.5625 9.29166 9.895C9.29166 8.9999 9.64724 8.14145 10.2802 7.50852C10.9131 6.87558 11.7716 6.52 12.6667 6.52ZM6.67191 19.2175C6.68492 18.2327 7.08512 17.2927 7.78593 16.6007C8.48674 15.9087 9.4318 15.5205 10.4167 15.52H14.9167C15.9015 15.5205 16.8466 15.9087 17.5474 16.6007C18.2482 17.2927 18.6484 18.2327 18.6614 19.2175C17.0165 20.6998 14.8809 21.5201 12.6667 21.5201C10.4525 21.5201 8.31678 20.6998 6.67191 19.2175Z"
                        fill="#F5F5F7"
                      />
                    </svg>
                  </div>
                </div>
                <div class="flex justify-between items-center">
                  <div class="default-text">
                    Your Tickets
                  </div>
                  <div class="flex gap-2 items-center text-[#FFDC7E]">
                    View Tickets
                    <svg width="21" height="17" viewBox="0 0 21 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M20.6665 13.8246V3.18943C20.6665 2.39471 20.3648 1.63222 19.8275 1.06941C19.2901 0.506639 18.5609 0.1892 17.8 0.186862H9.94164C9.59325 0.1822 9.2508 0.282248 8.95543 0.475153C8.65987 0.668058 8.42364 0.945662 8.27502 1.27474C8.21531 1.40237 8.12119 1.50903 8.0042 1.58168C7.88738 1.65434 7.75272 1.68989 7.61675 1.68387C7.48338 1.68795 7.3515 1.6524 7.23655 1.58149C7.12141 1.51078 7.02803 1.40743 6.96684 1.28349C6.81859 0.953431 6.58273 0.674469 6.28733 0.480216C5.99195 0.285754 5.64935 0.183963 5.30021 0.186877H3.5335C2.77257 0.189208 2.0434 0.506638 1.50603 1.06942C0.968668 1.63219 0.666962 2.39468 0.666962 3.18944V5.94842C0.662126 6.47936 0.794192 7.00214 1.0492 7.46137C1.30441 7.9208 1.67309 8.29999 2.11689 8.55935C2.28783 8.64677 2.43254 8.78139 2.53541 8.94846C2.63827 9.11572 2.69519 9.30921 2.70021 9.50794C2.695 9.70765 2.63789 9.90211 2.53522 10.0707C2.43255 10.2393 2.28802 10.3757 2.11689 10.4653C1.6714 10.7223 1.30105 11.1011 1.04568 11.5609C0.790293 12.0209 0.659343 12.5447 0.666972 13.0762V13.8507C0.666972 14.6456 0.968673 15.4079 1.50604 15.9707C2.04341 16.5337 2.77258 16.8509 3.53351 16.8533H5.27508C5.62217 16.8556 5.96259 16.7556 6.25739 16.5646C6.55221 16.3738 6.78956 16.0997 6.9417 15.7741C6.99899 15.6455 7.09106 15.5375 7.20658 15.4631C7.32227 15.3889 7.4562 15.3518 7.59179 15.3564C7.72572 15.3491 7.8589 15.3831 7.97441 15.4544C8.09011 15.5255 8.18292 15.6307 8.2417 15.7566C8.39088 16.0861 8.62692 16.3643 8.92211 16.5586C9.21731 16.7528 9.55938 16.8552 9.90832 16.8533H17.7667C18.5377 16.8603 19.2793 16.5434 19.8247 15.974C20.3698 15.4044 20.6732 14.6301 20.6665 13.8246ZM7.60833 12.4929C7.40465 12.4929 7.20916 12.4082 7.06539 12.2575C6.92142 12.1067 6.84107 11.9022 6.84181 11.6894C6.84255 11.4765 6.9244 11.2727 7.06929 11.1231C7.2142 10.9734 7.41025 10.89 7.61409 10.8916C7.81776 10.8931 8.0127 10.9794 8.15536 11.1313C8.29821 11.2832 8.37727 11.4882 8.37503 11.7011C8.37503 11.9126 8.29394 12.1153 8.14996 12.264C8.006 12.4129 7.81089 12.4953 7.60833 12.4929ZM7.60833 9.30774C7.40502 9.30774 7.21008 9.22324 7.06629 9.07307C6.92251 8.9229 6.84179 8.71931 6.84179 8.50697C6.84179 8.29463 6.92251 8.09104 7.06629 7.94087C7.21008 7.7907 7.40501 7.7062 7.60833 7.7062C7.81182 7.7062 8.00675 7.7907 8.15055 7.94087C8.29433 8.09103 8.37506 8.29463 8.37506 8.50697C8.37506 8.71931 8.29433 8.92289 8.15055 9.07307C8.00677 9.22323 7.81183 9.30774 7.60833 9.30774ZM7.60833 6.11361C7.40502 6.11361 7.21008 6.0293 7.06629 5.87913C6.92251 5.72897 6.84179 5.52538 6.84179 5.31284C6.84179 5.10051 6.92251 4.89691 7.06629 4.74674C7.21008 4.59656 7.40501 4.51226 7.60833 4.51226C7.81182 4.51226 8.00675 4.59657 8.15055 4.74674C8.29433 4.8969 8.37506 5.1005 8.37506 5.31284C8.37506 5.52536 8.29433 5.72895 8.15055 5.87913C8.00677 6.0293 7.81183 6.11361 7.60833 6.11361ZM15.7581 13.0759L11.6835 13.0761C11.3857 13.0761 11.1106 12.9102 10.9618 12.6409C10.813 12.3717 10.813 12.0399 10.9618 11.7706C11.1106 11.5014 11.3857 11.3355 11.6835 11.3355H15.7583C16.0559 11.3355 16.331 11.5014 16.48 11.7706C16.6288 12.0399 16.6288 12.3717 16.48 12.6409C16.331 12.9102 16.0559 13.0761 15.7583 13.0761L15.7581 13.0759ZM15.7581 9.35106L11.6835 9.35126C11.3857 9.35126 11.1106 9.18536 10.9618 8.9161C10.813 8.64666 10.813 8.31504 10.9618 8.04579C11.1106 7.77635 11.3857 7.61064 11.6835 7.61064H15.7583C16.0559 7.61064 16.331 7.77635 16.48 8.04579C16.6288 8.31505 16.6288 8.64666 16.48 8.9161C16.331 9.18536 16.0559 9.35126 15.7583 9.35126L15.7581 9.35106ZM15.7581 5.62624H11.6835C11.3857 5.62624 11.1106 5.46034 10.9618 5.19109C10.813 4.92183 10.813 4.59003 10.9618 4.32078C11.1106 4.05153 11.3857 3.88562 11.6835 3.88562H15.7583C16.0559 3.88562 16.331 4.05153 16.48 4.32078C16.6288 4.59003 16.6288 4.92184 16.48 5.19109C16.331 5.46034 16.0559 5.62624 15.7583 5.62624H15.7581Z"
                        fill="#FFDC7E"
                      />
                    </svg>
                  </div>
                </div>
                <div class="raw-card--light" :style="`border-bottom: 8px solid ${item.color};`">
                  <div class="text-start  text-xl font-semibold pt-4 flex gap-2 items-center" :style="`color: #E6E6E6`">
                    Lucky Number
                    <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="10" cy="10.52" r="9.5" stroke="#F5F5F7" />
                      <path
                        d="M10.8738 8.42527V14.3533H9.1098V8.42527H10.8738ZM10.3818 5.80927C10.7338 5.80927 10.9098 5.98927 10.9098 6.34927V6.98527C10.9098 7.34527 10.7338 7.52527 10.3818 7.52527H9.6138C9.2618 7.52527 9.0858 7.34527 9.0858 6.98527V6.34927C9.0858 5.98927 9.2618 5.80927 9.6138 5.80927H10.3818Z"
                        fill="#F5F5F7"
                      />
                    </svg>
                  </div>
                  <div class="numbers mt-5 mt-10">
                    <div class="flex justify-between items-center  h-[40px] gap-1">
                      <div v-for="(number, i) of item.lucky" :key="i">
                        <img :src="`/images/lottery/balls/${number}.png`">
                      </div>
                    </div>
                  </div>
                </div>
                <button
                  :style="`background: ${item.color}; color: ${item.textColor ? item.textColor : 'white'};`"
                  class="details hover:opacity-75 w-full my-2 p-2 rounded-lg flex justify-center items-center gap-2"
                >
                  Claim Rewards
                  <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M23.3961 12.9987C23.0868 12.7572 22.909 12.3931 22.909 11.9996C22.909 11.6065 23.0868 11.243 23.3961 11.0015C24.366 10.2444 24.7206 9.00631 24.3006 7.84738C23.88 6.68948 22.7946 5.96806 21.5875 6.01616C21.1948 6.0234 20.8263 5.86567 20.5742 5.56469C20.3227 5.26319 20.2258 4.87016 20.3078 4.48591C20.5655 3.28044 20.0449 2.10341 18.9801 1.48645C17.9173 0.871562 16.6417 1.00499 15.7289 1.83294C15.4377 2.0972 15.0496 2.20839 14.6641 2.14065C14.2781 2.07238 13.9524 1.83398 13.7684 1.48593C13.1937 0.395786 12.0413 -0.167906 10.8311 0.0441246C9.62144 0.258224 8.7298 1.18599 8.56074 2.40749C8.50714 2.79742 8.28191 3.13305 7.94329 3.32957C7.60467 3.52764 7.2006 3.55453 6.83724 3.40611C5.69923 2.94067 4.45402 3.25251 3.66288 4.19631C2.8738 5.14062 2.78464 6.42574 3.43868 7.47038C3.64691 7.80342 3.68968 8.20628 3.55516 8.57604C3.42116 8.94529 3.13047 9.22661 2.75835 9.34711C1.58891 9.72566 0.832298 10.7672 0.833329 12.0006C0.833329 13.2335 1.58891 14.2745 2.75835 14.6525C3.13047 14.7725 3.42116 15.0544 3.55516 15.4236C3.68968 15.7929 3.64691 16.1962 3.43868 16.5293C2.78464 17.5739 2.8738 18.8585 3.66288 19.8033C4.45402 20.7477 5.70027 21.0579 6.83724 20.5935C7.2006 20.4456 7.60467 20.4736 7.94329 20.6701C8.28191 20.8666 8.50714 21.2022 8.56074 21.5922C8.7298 22.8137 9.62144 23.7414 10.8311 23.9555C11.0012 23.985 11.1702 24 11.3362 24C12.3531 24 13.2746 23.4503 13.7684 22.5137C13.9524 22.1662 14.2781 21.9273 14.6641 21.859C15.0496 21.7923 15.4377 21.9024 15.7289 22.1667C16.6417 22.9941 17.9173 23.1281 18.9801 22.5132C20.0449 21.8962 20.5655 20.7192 20.3078 19.5137C20.2258 19.1295 20.3227 18.7365 20.5742 18.435C20.8263 18.134 21.1736 17.9664 21.5875 17.984C22.7946 18.0207 23.88 17.3102 24.3006 16.1523C24.7206 14.9933 24.366 13.7558 23.3961 12.9987ZM17.7715 8.91684L11.4331 16.0928C11.2826 16.2624 11.0744 16.3493 10.8651 16.3493C10.6863 16.3493 10.5074 16.2862 10.3631 16.159L7.59952 13.7124C7.28564 13.4347 7.25523 12.9532 7.53252 12.6382C7.81032 12.3223 8.29016 12.2938 8.60301 12.571L10.7986 14.5145L16.6355 7.90685C16.9133 7.59243 17.3932 7.56347 17.706 7.84169C18.0204 8.12095 18.0493 8.6019 17.7715 8.91684Z" :fill="`${item.textColor ? item.textColor : 'white'}`" />
                  </svg>
                </button>
              </div>
            </o-carousel-item>
          </o-carousel>
        </div>
      </div>
    </div>
  </ModalsBaseModal>
</template>

<script lang="ts">
import { computed, ref } from 'vue'
import { useBreakpoints } from '@vueuse/core'
import rewards from '~/data/rewards.json'
import { BreakPoint } from '~/model/break-points'

export default {
  props: {
    active: {
      type: Boolean,
      required: true,
      default: false
    }
  },
  emits: ['close'],
  setup(_props, { emit }) {
    const activeItem = ref(0)

    const close = () => {
      emit('close')
    }

    const breakpoints = useBreakpoints(BreakPoint)

    const next = () => {
      if (activeItem.value < Math.floor(rewards.length / 2)) {
        activeItem.value += 2
      } else {
        activeItem.value += 1
      }
    }

    const prev = () => {
      if (activeItem.value > 0) {
        activeItem.value -= 2
      }
    }
    const itemsToShow = computed(() => {
      if (breakpoints.sm.value || breakpoints.md.value) {
        return 1
      } else if (breakpoints.smaller('sm').value) {
        return 1
      }
      return 2
    })

    return {
      close,
      rewards,
      next,
      prev,
      itemsToShow,
      activeItem
    }
  }
}
</script>

<style lang="scss" scoped></style>
